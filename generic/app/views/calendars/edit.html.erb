<%= error_messages_for @calendar %>

<div class ='formcontainer'>
     
    <p><b> Calendars > Edit </b></p>

    <%= form_for(@calendar, :action => resource(@calendar)) do %>
	
          <table>
       
           <tr>
	       <td>Add for:<%= select :class_name, :collection => @class_rooms.collect{|x| x.class_name} %></td>
           <tr>
                <td><%= text_field :title,  :label => "Event Title" %></td>
           </tr>
	   <tr>
	        <td><%= text_area  :description,  :label => "Event Description",  :rows => "10", :cols => "25" %></td>
	   </tr>
	   <tr>
                <td><%= text_field  :location,  :label => "Location" %></td>
           </tr>
	   <tr>
	        <td><%= check_box :day_event, :onclick => "dayevent()" %>All Day Event</td>
	   </tr>
	   <tr>
	       <td><%= text_field :start_date, :id => "start", :label => "Starts:" %></td>
	       <% if @cal.day_event == true %>
	          <td><%= text_field :start_time, :id => "start_time", :disabled => true %></td>
	       <% else %>
		   <td><%= text_field :start_time, :id => "start_time" %></td>
	       <% end %>
	   </tr>
	   <tr>
	       <td><%= text_field :end_date, :id => "end", :label => "Ends:" %></td>
	       <% if @cal.day_event == true %>
	          <td><%= text_field :end_time, :id => "end_time", :disabled => true %></td>
	       <% else %>
		   <td><%= text_field :end_time, :id => "end_time" %></td>
	       <% end %>
	   </tr>
	   <tr>
              <td><%= submit "Publish" %></br> Or <%= link_to "Cancel", resource(:calendars) %></td>
           </tr> 
	   
     </table>
 <% end =%>
	   
    
</div>

<script type= "text/javascript">

   
  $j("#start").datepicker({minDate:'today'});
  $j("#end").datepicker({minDate:'today'});
  
  $j("#start_time").clockpick({starthour : 0, endhour : 23 }); 
  $j("#end_time").clockpick({starthour : 0, endhour : 23 }); 
 
       <% s = Calendar.find(:first, :conditions => ['day_event=?', true]) %>
       <% day = s.day_event %>
     var day = true;
     
  function dayevent()
  {
    if (document.getElementById('calendar_day_event').checked == true)
      {
         document.getElementById('start_time').disabled = true;
	 document.getElementById('end_time').disabled = true;
       }
     else if(document.getElementById('calendar_day_event').checked == false)
       {
         document.getElementById('start_time').disabled = false;
	 document.getElementById('end_time').disabled = false;
       }
  }
  
</script>

        

    
