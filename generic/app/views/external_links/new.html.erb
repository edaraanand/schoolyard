<div id="errors">
    <ul>      
      <li><%= @external_link.errors.full_messages.join('</li><li>') %></li>
    </ul>
</div>
<p> <%= params[:label] %> > new </p>

<div class='formcontainer'>

    <%= form_for(@external_link, :action => resource(:external_links), :id => 'links') do %>
        
        <table id='ExternalLinks'>

            <tr>
                <td><%= text_field  :title, :name => 'external_link[title][]' %></td>
                <td><%= text_field  :url, :name => 'external_link[url][]' %></td>
	    </tr>
	    <tr>
                <td><%= link_to_function 'Add', "add();" %></td>
		<td><input type = 'button' value = 'Preview' onclick="preview();return false;" /></td> 
                <td><%= submit "Publish" %> </br> Or <%= link_to "Cancel", resource(:external_links) %></td>
            </tr>
	  
        </table>
	     <%= hidden_field :name => "label", :value => params[:label] %>
	   
             
     <% end =%>
      

</div>

<script type= "text/javascript">
 
  function add()
   {
 
     var external = document.getElementById('ExternalLinks');

     var tr = document.createElement('tr');
         var td1 = document.createElement('td');  

         td1.innerHTML = "<input type='text' id='external_link_title' name='external_link[title][]'/>";

           var td2 = document.createElement('td');  

         td2.innerHTML = "<input type='text' id='external_link_url' name='external_link[url][]'/>";
         
        
         tr.appendChild(td1);
         tr.appendChild(td2);
        external.appendChild(tr);
 
 }
 
 function preview()
 {
   var s = $('links').serialize();
   window.open('/external_links/preview/-/?' + s);
   
 }
 

</script>
