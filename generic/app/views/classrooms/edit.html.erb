<%= error_messages_for @classroom %>
<ul class='error_messages'>
       <% if flash[:error] %>
          <li><%= flash[:error] %> </li>
       <% end %>
       <% if flash[:error2] %>
          <li><%= flash[:error2] %> </li>
       <% end %>
</ul>
<% s = (0..150).to_a %>

	<div class="container">
		 <ol>
			  <% s.each do |f| %>
			      <li><label for="txt<%= f %>" class="error">Please enter the Role</label></li> 
			      <li><label for="faculty<%= f %>" class="error">Please select the Faculty</label></li>
			      <li><label for="class_class_people<%=f%>" class="error">Please enter the Role</label></li>
        		<li><label for="class[people][faculty][]<%=f%>" class="error">Please select the Faculty</label></li>
			  <% end %>
      			<li><label for="classroom_class_name" class="error">Please enter the Class Name</label></li> 
      			<li><label for="class[teacher]" class="error">Please select the Faculty</label></li>
     </ol>
	</div>
	
<fieldset>
  <h2 class="current-page"> Classrooms &gt; Edit </h2>

  <%= form_for(@classroom, :id => "testing", :action => resource(@classroom), :class => "cmxform" ) do %>

    <ul id="class_room">
             <li>Class Type : <%= @classroom.class_type %></li>
             <% if @classroom.class_type == "Classes" %>
                   <li><%= text_field :class_name,  :label => "Class Name", :maxlength => "75", :class => "required" %></li>
             <% end %>
                  <% @class = @class_peoples.delete_if{|x| x.team_id != nil} %> <% q = 1 %>
           <% @class.each do |f| %>
                <% if f.role == "class_teacher" %>
                      <li>
                          <label><%= f.role.titleize %></label>
                          <%= select :name => "class[teacher]", :collection => @current_school.staff, 
                                     :selected => "#{f.person_id.to_s}", :value_method => :id, 
                                     :text_method => :name, :prompt => "Select Faculty", :class => "required" %>
                      </li>
                <% elsif f.role == "Athletic Director" %>
                       <li>
                           <label><%= f.role.titleize %></label>
                           <%= select :name => "class[teacher]", :class => "required",
                                      :collection => @current_school.staff, :selected => "#{f.person_id.to_s}", 
                                      :value_method => :id, :text_method => :name, :prompt => "Select Faculty" %>
                       </li>
                <% else %>
                       <li>
                           <%= text_field :name => 'class[people][r][]', :id => "class_class_people#{q}", 
                                         :value => "#{f.role}", :class => "short text required" %>
                           <%= select :class => "apart required", :name => "class[people][faculty][]", :collection => @current_school.staff, 
                                      :selected => "#{f.person_id.to_s}", :value_method => :id, :id => "class[people][faculty][]#{q}",
                                      :text_method => :name, :prompt => "Select Faculty" %>
                           <%= link_to "Remove", url(:delete_classroom, f, :label => "remove"), :class => "delete remove" %>
                       </li>
                <% end %> <% q += 1 %>
            <% end %>
           <li><%= text_field :position, :label => 'Position in sequence', :maxlength => '3' %></li>
     </ul>
            <ul id="roles"></ul>
            <input type="hidden" id="id" value="1">
            <a href="#" class="add-more" onclick="addFormField(); return false;">Add More</a>
     
        <div class="save-cancel">
             <%= submit "    Save    " %> Or <%= link_to "Cancel", url(:classrooms), :class => "cancel" %>
        </div>
 <% end =%>
 
</fieldset>


 <script type="text/javascript" src='/javascripts/delete_confirmation.js'></script>

<script type= "text/javascript">
 
 function addFormField()
  {
    var id = document.getElementById('id').value;
    $j('#roles').append("<li id='row" + id + "'><input type='text' class='short text required' name='class[p][roles][]' id='txt" + id + "'><select class='apart required' id='faculty"+id+"' name='class[p][ids][]'><option value=''>Select Faculty</option><% @teachers.each do |teacher| %><option value='<%= teacher.id %>'><%= teacher.name %></option><% end %></select><a href='#' class='remove' onclick='removeFormField(\"#row" + id + "\"); return false;'>Remove</a></li>");
    $('txt'+id).focus();
    id = (id - 1) + 2;
    document.getElementById('id').value = id;
}

   function removeFormField(id) 
   {
      $j(id).remove();
    }
    
    
 function class_type()
    {
        var class_name = document.getElementById('class_name');
        var teacher = document.getElementById('teacher');
        var sport = document.getElementById('sport');
       if (document.getElementById('classroom_class_type').value == "Sports" )
        {
          
           class_name.style.display      =  "none";
            teacher.style.display      =  "none";
           sport.style.display      =  "block";
         }
        else
           {
             var class_name = document.getElementById('class_name');
             class_name.style.display      =  "block";
              teacher.style.display      =  "block";
             sport.style.display      =  "none";
         }
     }

  // Validation for Adding Classrooms

	var container = $j('div.container');

	// validate the form when it is submitted
	var validator = $j("#testing").validate({
		errorContainer: container,
		errorLabelContainer: $("ol", container),
		wrapper: 'li',
		meta: "validate"
	});


     
</script>

 <style type="text/css">

 	.cmxform fieldset li.error label { color: red; }
	div.container {
		background-color: #eee;
		border: 1px solid red;
		margin: 5px;
		padding: 5px;
	}
	div.container ol li {
		list-style-type: disc;
		margin-left: 20px;
	}
	div.container { display: none }
	.container label.error {
		display: inline;
	}

	form.cmxform label.error {
		display: block;
		margin-left: 1em;
		width: auto;
	}

</style>




